# [#SobaScript](https://github.com/3F/SobaScript)

Interpreted Embedded Domain Specific a Weakly Typed an Extensible at runtime Modular Scripting Programming Language -- #SobaScript.

[![Build status](https://ci.appveyor.com/api/projects/status/sobascript/branch/master?svg=true)](https://ci.appveyor.com/project/3Fs/sobascript/branch/master)
[![release-src](https://img.shields.io/github/release/3F/SobaScript.svg)](https://github.com/3F/SobaScript/releases/latest)
[![License](https://img.shields.io/badge/License-MIT-74A5C2.svg)](https://github.com/3F/SobaScript/blob/master/License.txt)
[![NuGet package](https://img.shields.io/nuget/v/SobaScript.svg)](https://www.nuget.org/packages/SobaScript/)
[![Tests](https://img.shields.io/appveyor/tests/3Fs/sobascript/master.svg)](https://ci.appveyor.com/project/3Fs/sobascript/build/tests)

[![Build history](https://buildstats.info/appveyor/chart/3Fs/sobascript?buildCount=20&includeBuildsFromPullRequest=true&showStats=true)](https://ci.appveyor.com/project/3Fs/sobascript/history)

## License

Licensed under the [MIT License](https://github.com/3F/SobaScript/blob/master/License.txt)

```
Copyright (c) 2014-2019  Denis Kuzmin < x-3F@outlook.com > GitHub/3F
```

[ [ â˜• Donate ](https://3F.github.com/Donation/) ]

SobaScript contributors: https://github.com/3F/SobaScript/graphs/contributors

# # #

```clojure
#["
    #SobaScript in action
"]
#[var v = 1.2.3]
#[$(log = "$(TMP)/v.txt")]

#[($(Configuration) ~= Deb || true)
{
    #[var tBase     = $([System.DateTime]::Parse('2019/08/01').ToBinary())]
    #[var tNow      = $([System.DateTime]::UtcNow.Ticks)]
    #[var revBuild  = #[$(
        [System.TimeSpan]::FromTicks('$(
            [MSBuild]::Subtract(
            $(tNow), 
            $(tBase))
        )')
        .TotalMinutes
        .ToString('0')
    )]]
    
    #[var v = $(v).$([MSBuild]::Modulo($(revBuild), $([System.Math]::Pow(2, 14))))]
}]

#[var v = $([System.String]::Format("v{0}\r\n\t", $(v)))]

#[try
{ 
    #[File write("#[var log]"):> Example #[var v] Generated by a vsSBE]
    #[IO scall("notepad", "#[var log]")]
}
catch(err, msg)
{
    $(err) - Type of Exception
    $(msg) - Error Message
}]
```

Can be closely integrated with [E-MSBuild](https://github.com/3F/E-MSBuild):

```clojure
#[$(
    [System.Math]::Exp('$(
        [MSBuild]::Multiply(
            $([System.Math]::Log(10)), 
            4
        ))'
    )
)]
```

Or even be loyal to your any preferences *on the fly* ðŸ”§.


# Syntax and features

evaluation region (container)   | escaping
--------------------------------|--------------
`#[ â€¦ ]`                        | `##[ â€¦ ]`


## Arguments

Although SobaScript is a weakly typed, internally it operates with the following types by default* (means you can still extend something through new component):

type       | description
-----------|------------
integer    | Signed 32-bit integer
string     | Both types: From "double quotes" & From 'single quotes'.
char       | 
float      | Signed floating-point number with single-precision. The `f` postfix for clarify: 1.25f, -1.25f
double     | Signed floating-point number with double-precision. The optional `d` postfix for clarify: 1.25d or simply 1.25, -1.25
enum       |
const      |
object     | 
bool       |
*mixed*    | *Unspecified mixed data*
expression | An composite definition like a conditional expression ~ `(((1 < 2) && true) || $(debug) != "r200")` and so on.

### Object type

The object type is a type for work with complex mixed data.

Value can be from all available scalar types + complex, like this:

```clojure
{}
{"str", true}
{"str", {1, 'y', {-12.457f}}, true}
...
```

### Boolean type

Allowed forms:

true  | false
------|-------
1     | 0
True  | False
TRUE  | FALSE
true  | false

### In (Input) type

This is unspecified or mixed type of data. To consider data 'as is'. As for string arguments may contain other inner containers that will be evaluated before.

It's safe only for pair symbols of container. For unpaired you need either place your data inside string argument or use special marker `<#data> â€¦ </#data>`

## Custom extending via IPM analyzer

```csharp
IPM pm = new PM(raw)
```

Where **raw** it's your raw data 'as is'. After, you can work with parsed data via pm instance.

For example, how about this:

```clojure
#[Func hash.SHA1("test")]
```

here's **complete minimal logic**:

```csharp
IPM pm = new PM(data); // pointed to - ILevel lvlHash
```

```csharp
// hash.SHA1("data")
if(pm.FinalEmptyIs(LevelType.Method, "SHA1"))
{
    lvlHash.Is("hash.SHA1(string data)", ArgumentType.StringDouble);
    return ((string)lvlHash.Args[0].data).SHA1Hash();
}
```

That's all. Now you can calculate hash value from user scripts with allowed syntax above.

It can be a more flexible, just use other available way: SNode.IPM

## third-party components

SobaScript - https://github.com/3F/SobaScript

Uses the following third-party components:

* [E-MSBuild](https://github.com/3F/E-MSBuild)
* [Varhead](https://github.com/3F/Varhead)
* [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) - Actually, only for this line: `((JArray)data).ToObject(typeof(object[]))`. This dependency is still being considered.
* [LSender](https://github.com/3F/LSender)
